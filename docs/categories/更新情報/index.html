<!DOCTYPE html>
<html class="nojs" lang="en" dir="ltr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>更新情報 – My New Hugo Site</title>
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://example.org/categories/%E6%9B%B4%E6%96%B0%E6%83%85%E5%A0%B1/index.xml">
<meta name="description" content="">
<meta name="created" content="2020-10-11T08:32:07+0000">
<meta name="modified" content="2020-10-11T08:32:07+0000">


<meta property="og:site_name" content="My New Hugo Site">
<meta property="og:title" content="更新情報">
<meta property="og:url" content="http://example.org/categories/%E6%9B%B4%E6%96%B0%E6%83%85%E5%A0%B1/">
<meta property="og:type" content="website">

<meta name="generator" content="Hugo 0.68.3" />
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="theme-color" content="#ffffff">


<link rel="canonical" href="http://example.org/categories/%E6%9B%B4%E6%96%B0%E6%83%85%E5%A0%B1/">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">

<link rel="stylesheet" href="/css/styles.07de9722ae74190da91740ecb1e12bbfa31de324e29ab4972bdcc4131519528c.css">
<link rel="stylesheet" href="/css/print.27fc184f8670f41a2690985390779e7b20335a8fadff8fa015cf9417ffe50c36.css" media="print">

<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "url" : "http://example.org/categories/%E6%9B%B4%E6%96%B0%E6%83%85%E5%A0%B1/",
    "name": "更新情報",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "http://example.org/"
    },
    "publisher": {
      "@type": "Organization",
      "name": "My New Hugo Site",
      "url": "http://example.org/"
    }
  }
</script>

<script src="/js/script-early.min.a8d899ac88f2a778985767b86ce681945e3fa2069c3c9efd17e5e5b594d3ba1f.js"></script>
<script defer src="/js/lib/umbrella.min.b426107371d121c9a56a27aac9e9058ff592a021e2f4c3c94827fe70920d3cbb.js"></script>
<script defer src="/js/script.min.f7f56769569fdf7a80d073b6775c6cd9ed8ae528864cd3f2aa1c8c3fe73f87ea.js"></script>


</head>

<body class="list-page">
<div class="page layout__page layout__sidebar-second">
<header class="header layout__header">
<a href="/" title="Home" rel="home" class="header__logo"><img src="/images/logo.png" alt="Home" class="header__logo-image"></a>
<h1 class="header__site-name">
<a href="/" title="Home" class="header__site-link" rel="home"><span>My New Hugo Site</span></a>
</h1>
<div class="region header__region">
</div>
</header>

<nav class="main-menu layout__navigation">
<h2 class="visually-hidden">Main menu</h2>
<ul class="navbar">
<li><a href="/" class="active" aria-current="page">Home</a></li>
<li><a href="/posts/">Posts</a></li>
</ul>
</nav>


<main class="main layout__main">
<h1 class="title">更新情報</h1>
<article class="section-posts list-view">
<header>
<h2 class="title "><a href="/blog/post-1737/">記事更新： 泥舟からの決死の脱出</a></h2>

</header>
<div class="content">
昔々、スクエニのロマンシング・サガってRPGゲームがあって、田中(゜p゜)はSFC版でリアルタイムにやっとったんですが、サルーインという邪神がラスボスなのです。
このサルーインという邪神は、1000年ほど前、ディスティニーストーンという必殺兵器を身に着けた人間に敗れ、封印されてしまった存在。
このラスボスサルーインが、主人公との対峙の前に言うセリフ。
田中(゜p゜)はこの上なく好きなのです。
セリフが流れていって、「はいぼく！」の前で一度区切れるところが秀逸。
神はあらかじめ存在を定義されたものであって、決して過ちを認められないからこそ神なのです。
そして逆に人間は過ちを認め、変われるからこそ人間なのだと思います。
前ふり長くなりましたけど、田中(゜p゜)の ただいちどの ……はいぼく！
泥船から決死の脱出
</div>
</article>

<article class="section-posts list-view">
<header>
<h2 class="title "><a href="/blog/post-1091/">WordPress on GAE Standard  構築(済)</a></h2>

</header>
<div class="content">
前回のKusanagi on GKEギブアップからまだ懲りてません(笑)
今度はGoogle App Engine(GAE)を使ってWordPressを構築します。
ちなみにStandardの方で構築するので、CloudSQL以外は、使った分だけお金を支払えばよいというスグレモノ。しかもスケーリングも証明書も、何もかもやってくれるオマケ付き。
間違えてフレキシブルで構築すると、自由度が高い代わりにGCEインスタンス代がコンスタントにかかってしまうので注意です。比較表はこちら(外部サイト) https://www.serversus.work/topics/5jbu7y90jk81kcdqfzf0/進捗状況 今回のは実はもうサイトできてます。既存のサイトからの移行方法も検証済。
サイトはこちら。 ※2020/09/29追記 移行しちゃったのでもうありません。
ハハッ。
田中(゜p゜)の技術者としての能力も捨てたもんじゃないね！
というか、田中(゜p゜)は昔この構成でWordPressやったことあるんですけどね！
最近チュートリアルがアップデートされて、画像ファイルとかの扱いがさらに容易くなりました。
GKEであれだけ苦戦してたのがウソのよう。
GAEサイコー!
運用上の注意点 ただし、そんなに上手い話は世にはなかなかないのです。
カンタンにできるから真似してみよう！ と思われる方のために注意点。
この構成の一番の問題は、GAEに上げちゃったが最後、WPのGUIから更新できないものが発生することです。
更新できないものを以下に並べます。
 プラグイン(設定は除く) テーマ(設定は除く) 投稿・固定ページへの直接画像貼り付け(メディアライブラリからはOK)  3つともかなり致命的だと思います。
これに関連してWP側でエラーが出ることがありますが、そもそもGAEはディスクに書き込めないものだというのを知っておかないと混乱します。
回避方法 カンタンにいうと、ローカルにサーバを立てて、そこで管理します。
GAEはCloudSQL Proxyってのを使わないとCloudSQLには接続できないので、ローカルにも同じプロキシを入れてDBにアクセスできるようにします。
図中の①です。
また、ローカルのWordPressは、環境構築した後、yaml書いてGAEにデプロイします。
図中②の部分です。
じゃあ更新はどうするのかというと、ローカルにPHPサーバ構築して、WordPressのGUIを動かして更新します。
記事はDBに書かれるので特にアクションは必要ないですが、画像、テーマ、プラグインを更新した場合は②のデプロイが必要になります。
デプロイはワンライナーですけどめんどくせえ・・・。
けど、WordPressをクラスタ化したら、どのみち更新用の端末とか必要になってきそうだしなー。
構築方法 それでもやりたい方のために、構築を方法を書きます。
つ Googleのチュートリアル。
https://cloud.google.com/community/tutorials/run-wordpress-on-appengine-standard?hl=ja
…というだけでは投稿の意味がないので、注意点を少し。
 チュートリアルにミス。
×php vendor/bin/wp-gae
○php vendor/bin/wp-gae create WP CLIのインストールは、チュートリアルじゃなくて公式のほうが良い。
https://wp-cli.org/ja/ サーバの作り方が書いてないが、php、php-mysqlインストールして、以下で行ける。
cd &lt;WordPressのフォルダ&gt;
php -S 127.0.0.1:9000
ブラウザでhttp://127.0.0.1:9000/にアクセス。 ただし遅いので、レスポンス気になるならきちんとサーバ立てたほうが良い。  更新の早い世の中ですから、公式と最新版のギャップは大きくなっていくものと思われます。もちろんこのブログもです。
以下、既存のWordPressサイトからの移行方法ですので、新規の方は見なくて良いと思います。
</div>
</article>


</main>


<footer class="footer layout__footer">
<p><span>© My New Hugo Site</span></p>


</footer>

</div>
</body>
</html>
